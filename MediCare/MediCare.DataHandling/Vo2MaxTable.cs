using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace MediCare.DataHandling
{
    public class Vo2MaxTable
    {
        private double[,] vo2MaxValueMale;
        private double[,] vo2MaxValueFemale;

        private static int[] correctionValue;

        private void init()
        {
                                 //powerlevel  100, 150, 200, 250 watt
            vo2MaxValueMale = new double[,] { {2.6, 3.5, 4.7, 5.9}, //141
                                              {2.5, 3.5, 4.6, 5.8}, //142
                                              {2.5, 3.4, 4.6, 5.7}, //143
                                              {2.5, 3.4, 4.5, 5.7}, //144
                                              {2.4, 3.4, 4.5, 5.6}, //145
                                              {2.4, 3.3, 4.4, 5.6}, //146
                                              {2.4, 3.3, 4.4, 5.5}, //147
                                              {2.4, 3.2, 4.3, 5.4}, //148
                                              {2.3, 3.2, 4.3, 5.4}, //149
                                              {2.3, 3.2, 4.2, 5.3}, //150
                                              {2.3, 3.1, 4.2, 5.2}, //151
                                              {2.3, 3.1, 4.1, 5.2}, //152
                                              {2.2, 3.0, 4.1, 5.1}, //153
                                              {2.2, 3.0, 4.0, 5.1}, //154
                                              {2.2, 3.0, 4.0, 5.0}, //155
                                              {2.2, 2.9, 4.0, 5.0}, //156
                                              {2.1, 2.9, 3.9, 4.9}, //157
                                              {2.1, 2.9, 3.9, 4.9}, //158
                                              {2.1, 2.8, 3.8, 4.8}, //159
                                              {2.1, 2.8, 3.8, 4.8}, //160
                                              {2.0, 2.8, 3.7, 4.7}, //161
                                              {2.0, 2.8, 3.7, 4.6}, //162
                                              {2.0, 2.8, 3.7, 4.6}, //163
                                              {2.0, 2.7, 3.6, 4.5}, //164
                                              {2.0, 2.7, 3.6, 4.5}, //165
                                              {1.9, 2.7, 3.6, 4.5}, //166
                                              {1.9, 2.6, 3.5, 4.4}, //167
                                              {1.9, 2.6, 3.5, 4.4}, //168
                                              {1.9, 2.6, 3.5, 4.4}, //169
                                              {1.8, 2.6, 3.4, 4.3}, //170
            };
                                 //powerlevel  75, 100, 125, 150 watt
            vo2MaxValueFemale = new double[,] { {2.3, 2.8, 3.4, 3.9}, //141
                                                {2.3, 2.8, 3.3, 3.9}, //142
                                              {2.2, 2.7, 3.3, 3.8}, //143
                                              {2.2, 2.7, 3.2, 3.8}, //144
                                              {2.2, 2.7, 3.2, 3.7}, //145
                                              {2.2, 2.6, 3.2, 3.7}, //146
                                              {2.1, 2.6, 3.1, 3.6}, //147
                                              {2.1, 2.6, 3.1, 3.6}, //148
                                              {2.1, 2.6, 3.0, 3.5}, //149
                                              {2.0, 2.5, 3.0, 3.5}, //150
                                              {2.0, 2.5, 3.0, 3.4}, //151
                                              {2.0, 2.5, 2.9, 3.4}, //152
                                              {2.0, 2.4, 2.9, 3.3}, //153
                                              {2.0, 2.4, 2.8, 3.3}, //154
                                              {1.9, 2.4, 2.8, 3.2}, //155
                                              {1.9, 2.3, 2.8, 3.2}, //156
                                              {1.9, 2.3, 2.7, 3.2}, //157
                                              {1.8, 2.3, 2.7, 3.1}, //158
                                              {1.8, 2.2, 2.7, 3.1}, //159
                                              {1.8, 2.2, 2.6, 3.0}, //160
                                              {1.8, 2.2, 2.6, 3.0}, //161
                                              {1.8, 2.2, 2.6, 3.0}, //162
                                              {1.7, 2.2, 2.6, 2.9}, //163
                                              {1.7, 2.1, 2.5, 2.9}, //164
                                              {1.7, 2.1, 2.5, 2.9}, //165
                                              {1.7, 2.1, 2.5, 2.8}, //166
                                              {1.6, 2.1, 2.4, 2.8}, //167
                                              {1.6, 2.0, 2.4, 2.8}, //168
                                              {1.6, 2.0, 2.4, 2.8}, //169
                                              {1.6, 2.0, 2.4, 2.7}, //170
            };

            correctionValue = new int[] { 1050, 1040, 1030, 1020, 1010, 1000, 987, 974, 961, 948, 935, 922, 909, 896, 883, 870, 862, 854, 846, 838, 830 };
        }

            public static double getVo2MaxValue(int hearRate, int power, bool male)
            {
                int heartRateOffset = 140;
                int x = hearRate - heartRateOffset;
                int y;

                if(male)
                {
                    y = power/50 -2;
                    return vo2MaxValueMale[x,y];
                }
                else
                {
                    y = power/25 -3;
                    return vo2MaxValueFemale[x,y];
                }
            }

            public static int getCorrectionValue(int leeftijd)
            {
                return correctionValue[leeftijd - 20];
            }
        }
    }